<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Camiseta Crema</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body id="top">
  <header class="main-header">
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <a href="index.html" class="title center-title">GÃ‰NESIS</a>
  </header>

  <nav id="navMenu" class="nav-menu">
    <div class="nav-menu-content">
      <button class="nav-menu-close">â€¹</button>
      <a href="#" class="submenu-link">Colecciones</a>
      <a href="index.html#sobre-nosotros" onclick="toggleMenu()">Sobre Nosotros</a>
      <a href="index.html#contacto" onclick="toggleMenu()">Contacto</a>
    </div>
  </nav>

  <div class="submenu">
    <button class="nav-menu-close">â€¹</button>
    <a href="productos.html" onclick="toggleMenu()">El Origen de Todo</a>
  </div>

  <section class="product-detail">
    <div class="slider">
      <button class="arrow left" onclick="changeSlide(-1)">&#8249;</button>
      <img src="img/frente-crema.jpg" alt="Camiseta Crema Frente" class="active">
      <img src="img/espalda-crema.jpg" alt="Camiseta Crema Espalda">
      <button class="arrow right" onclick="changeSlide(1)">&#8250;</button>
    </div>
    <div class="product-options">
      <h1 style="font-family: 'Old Standard TT', serif; font-size: 2rem; font-weight: bold; color: var(--gold); margin-bottom: 1rem;">
        Camiseta oversized, El Origen De Todo, Crema, Genesis
      </h1>
      <label for="size">Talla:</label>
      <div class="size-selector">
        <div class="size-option" data-key="crema-S">S</div>
        <div class="size-option" data-key="crema-M">M</div>
        <div class="size-option" data-key="crema-L">L</div>
      </div>
      <p id="size-guide" onclick="openSizeGuide()">GuÃ­a de Tallas</p>
      <div id="sizeGuideModal" class="modal" onclick="closeSizeGuide()">
        <div class="modal-content" onclick="event.stopPropagation()">
          <img src="img/guia-tallas.jpg" alt="GuÃ­a de Tallas">
          <button class="modal-close" onclick="closeSizeGuide()">Ã—</button>
        </div>
      </div>

      <label for="quantity">Cantidad:</label>
      <div class="quantity-selector">
        <button onclick="changeQuantity(-1)">-</button>
        <span id="quantity">1</span>
        <button onclick="changeQuantity(1)">+</button>
      </div>
      <p style="font-family: 'Old Standard TT', serif; font-size: 1.2rem; color: var(--black); margin-top: 0.5rem;">Precio: $90,000 COP</p>
      <button onclick="makeOrder()">Hacer Pedido</button>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-column">
        <h3 class="footer-title">GÃ‰NESIS</h3>
        <ul class="footer-links">
          <li><a href="index.html">Inicio</a></li>
          <li><a href="productos.html">Colecciones</a></li>
          <li><a href="index.html#sobre-nosotros">Sobre nosotros</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3 class="footer-title">INFORMACIÃ“N</h3>
        <ul class="footer-links">
          <li><a href="#">PolÃ­ticas de Cambios y Devoluciones</a></li>
          <li><a href="#">PolÃ­ticas de EnvÃ­os</a></li>
          <li><a href="#">PolÃ­ticas de Privacidad</a></li>
          <li><a href="#">TÃ©rminos y Condiciones</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3 class="footer-title">Â¿CÃ“MO COMPRAR?</h3>
        <ul class="footer-list">
          <li>Explora los productos.</li>
          <li>Elige talla y color disponibles.</li>
          <li>Haz clic en comprar y serÃ¡s redirigido a WhatsApp.</li>
          <li>Coordina el pago por Nequi o Bancolombia.</li>
          <li>Recibe tu pedido en casa.</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-social">
        <a href="https://instagram.com/genesis.1.00" target="_blank" class="social-icon">Instagram</a>
        <div class="separator"></div>
        <a href="https://tiktok.com/@genesis.1.00" target="_blank" class="social-icon">TikTok</a>
        <div class="separator"></div>
        <a href="mailto:genesiswearline@gmail.com" class="social-icon">genesiswearline@gmail.com</a>
      </div>
      <div class="footer-language">ESPAÃ‘OL â–¼</div>
      <p class="footer-note">SÃ­guenos en Instagram para lanzamientos exclusivos.</p>
      <p class="footer-copyright">Â© 2025 â€“ GÃ‰NESIS WEAR</p>
    </div>
  </footer>

  <script>
    let selectedSize = null;
    let quantity = 1;
    let currentSlide = 0;
    let stock = {}; // Stock data will be dynamically fetched

    async function fetchStock() {
      const inventoryUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ1GmPqpqeJwtefR3tM2hndAI5meeDVRjDljqanIFwGno_VogkYgi-6x1dAVErf_i7QjRP0IfB9c_fF/pub?gid=0&single=true&output=csv";
      try {
        const response = await fetch(inventoryUrl, { cache: "no-store" });
        const csvData = await response.text();
        const rows = csvData.split("\n").slice(1).filter(row => row.trim() !== ""); // Skip header and filter empty rows
        stock = rows.reduce((acc, row) => {
          const [color, size, quantity] = row.split(",");
          const key = `${color.toLowerCase()}-${size.toUpperCase()}`;
          acc[key] = parseInt(quantity, 10);
          return acc;
        }, {});
      } catch (error) {
        console.error("Error fetching stock data:", error);
      }
    }

    function selectSize(size) {
      selectedSize = size;
      document.querySelectorAll('.size-option').forEach(option => option.classList.remove('selected'));
      document.querySelectorAll('.size-option').forEach(option => {
        if (option.textContent === size) option.classList.add('selected');
      });
      quantity = 1; // Reset quantity when size changes
      document.getElementById('quantity').textContent = quantity;
    }

    document.querySelectorAll('.size-option').forEach(option => {
      option.addEventListener('click', () => {
        if (!option.classList.contains('unavailable')) {
          selectSize(option.dataset.key.split('-')[1]); // Use the size from the data-key attribute
        }
      });
    });

    function openSizeGuide() {
      document.getElementById('sizeGuideModal').classList.add('show');
    }

    function closeSizeGuide() {
      document.getElementById('sizeGuideModal').classList.remove('show');
    }

    function changeQuantity(change) {
      if (!selectedSize) {
        alert('Por favor selecciona una talla.');
        return;
      }
      const maxQuantity = stock[`crema-${selectedSize}`] || 0; // Get stock for the selected size
      quantity = Math.max(1, Math.min(maxQuantity, quantity + change));
      document.getElementById('quantity').textContent = quantity;
    }

    function makeOrder() {
      if (!selectedSize) {
        alert('Por favor selecciona una talla.');
        return;
      }
      const message = `Hola Genesis ðŸ‘‹, deseo ordenar la camisa "El Origen de Todo", color crema, talla ${selectedSize}, cantidad ${quantity}. ðŸ”¥`;
      window.open(`https://wa.me/573176650424?text=${encodeURIComponent(message)}`);
    }

    function changeSlide(direction) {
      const slides = document.querySelectorAll('.slider img');
      slides[currentSlide].classList.remove('active');
      currentSlide = (currentSlide + direction + slides.length) % slides.length;
      slides[currentSlide].classList.add('active');
    }

    // Fetch stock data on page load
    fetchStock();
  </script>
  <script src="menu.js"></script>
</body>
</html>
